# Comparing `tmp/clearml_agent-1.5.3rc2-py3-none-any.whl.zip` & `tmp/clearml_agent-1.5.3rc3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,131 +1,131 @@
-Zip file size: 401439 bytes, number of entries: 129
--rw-r--r--  2.0 unx       50 b- defN 23-Apr-28 06:49 clearml_agent/__init__.py
--rw-r--r--  2.0 unx     2891 b- defN 23-Apr-28 06:49 clearml_agent/__main__.py
--rw-r--r--  2.0 unx     2410 b- defN 23-Apr-28 06:49 clearml_agent/complete.py
--rw-r--r--  2.0 unx      736 b- defN 23-Apr-28 06:49 clearml_agent/config.py
--rw-r--r--  2.0 unx    11014 b- defN 23-Apr-28 06:49 clearml_agent/definitions.py
--rw-r--r--  2.0 unx     2826 b- defN 23-Apr-28 06:49 clearml_agent/errors.py
--rw-r--r--  2.0 unx    15942 b- defN 23-Apr-28 06:49 clearml_agent/session.py
--rw-r--r--  2.0 unx       25 b- defN 23-Apr-28 06:49 clearml_agent/version.py
--rw-r--r--  2.0 unx      123 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/__init__.py
--rw-r--r--  2.0 unx     4786 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/utils.py
--rw-r--r--  2.0 unx      561 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/config/__init__.py
--rw-r--r--  2.0 unx    19161 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/config/default/agent.conf
--rw-r--r--  2.0 unx     1796 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/config/default/api.conf
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/config/default/logging.conf
--rw-r--r--  2.0 unx     6857 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/config/default/sdk.conf
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/schema/__init__.py
--rw-r--r--  2.0 unx     1295 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/schema/action.py
--rw-r--r--  2.0 unx     6824 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/schema/service.py
--rw-r--r--  2.0 unx      282 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/__init__.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_4/__init__.py
--rw-r--r--  2.0 unx    17434 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_4/auth.py
--rw-r--r--  2.0 unx     4029 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_4/debug.py
--rw-r--r--  2.0 unx    89217 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_4/events.py
--rw-r--r--  2.0 unx    90805 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_4/models.py
--rw-r--r--  2.0 unx    66636 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_4/queues.py
--rw-r--r--  2.0 unx   218713 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_4/tasks.py
--rw-r--r--  2.0 unx    77983 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_4/workers.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_5/__init__.py
--rw-r--r--  2.0 unx    17434 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_5/auth.py
--rw-r--r--  2.0 unx     4029 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_5/debug.py
--rw-r--r--  2.0 unx    90043 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_5/events.py
--rw-r--r--  2.0 unx    90805 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_5/models.py
--rw-r--r--  2.0 unx    66636 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_5/queues.py
--rw-r--r--  2.0 unx   234295 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_5/tasks.py
--rw-r--r--  2.0 unx    77996 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/services/v2_5/workers.py
--rw-r--r--  2.0 unx      338 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/__init__.py
--rw-r--r--  2.0 unx      156 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/apimodel.py
--rw-r--r--  2.0 unx     5233 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/callresult.py
--rw-r--r--  2.0 unx     4598 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/datamodel.py
--rw-r--r--  2.0 unx     1877 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/defs.py
--rw-r--r--  2.0 unx      345 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/errors.py
--rw-r--r--  2.0 unx     2817 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/request.py
--rw-r--r--  2.0 unx     1932 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/response.py
--rw-r--r--  2.0 unx    27875 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/session.py
--rw-r--r--  2.0 unx     4200 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/token_manager.py
--rw-r--r--  2.0 unx       55 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/client/__init__.py
--rw-r--r--  2.0 unx    16055 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/client/client.py
--rw-r--r--  2.0 unx      175 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/jsonmodels/__init__.py
--rw-r--r--  2.0 unx     6397 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/jsonmodels/builders.py
--rw-r--r--  2.0 unx      552 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/jsonmodels/collections.py
--rw-r--r--  2.0 unx      145 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/jsonmodels/errors.py
--rw-r--r--  2.0 unx    13503 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/jsonmodels/fields.py
--rw-r--r--  2.0 unx     4738 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/jsonmodels/models.py
--rw-r--r--  2.0 unx     2993 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/jsonmodels/parsers.py
--rw-r--r--  2.0 unx     4006 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/jsonmodels/utilities.py
--rw-r--r--  2.0 unx     6294 b- defN 23-Apr-28 06:49 clearml_agent/backend_api/session/jsonmodels/validators.py
--rw-r--r--  2.0 unx      109 b- defN 23-Apr-28 06:49 clearml_agent/backend_config/__init__.py
--rw-r--r--  2.0 unx    12445 b- defN 23-Apr-28 06:49 clearml_agent/backend_config/config.py
--rw-r--r--  2.0 unx     1704 b- defN 23-Apr-28 06:49 clearml_agent/backend_config/converters.py
--rw-r--r--  2.0 unx     1776 b- defN 23-Apr-28 06:49 clearml_agent/backend_config/defs.py
--rw-r--r--  2.0 unx     3531 b- defN 23-Apr-28 06:49 clearml_agent/backend_config/entry.py
--rw-r--r--  2.0 unx     2163 b- defN 23-Apr-28 06:49 clearml_agent/backend_config/environment.py
--rw-r--r--  2.0 unx      186 b- defN 23-Apr-28 06:49 clearml_agent/backend_config/errors.py
--rw-r--r--  2.0 unx      851 b- defN 23-Apr-28 06:49 clearml_agent/backend_config/log.py
--rw-r--r--  2.0 unx     3815 b- defN 23-Apr-28 06:49 clearml_agent/backend_config/utils.py
--rw-r--r--  2.0 unx       99 b- defN 23-Apr-28 06:49 clearml_agent/commands/__init__.py
--rw-r--r--  2.0 unx    15160 b- defN 23-Apr-28 06:49 clearml_agent/commands/base.py
--rw-r--r--  2.0 unx      536 b- defN 23-Apr-28 06:49 clearml_agent/commands/check_config.py
--rw-r--r--  2.0 unx    16954 b- defN 23-Apr-28 06:49 clearml_agent/commands/config.py
--rw-r--r--  2.0 unx     3204 b- defN 23-Apr-28 06:49 clearml_agent/commands/events.py
--rw-r--r--  2.0 unx     6554 b- defN 23-Apr-28 06:49 clearml_agent/commands/resolver.py
--rw-r--r--  2.0 unx   189674 b- defN 23-Apr-28 06:49 clearml_agent/commands/worker.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 06:49 clearml_agent/external/__init__.py
--rw-r--r--  2.0 unx      256 b- defN 23-Apr-28 06:49 clearml_agent/external/pyhocon/__init__.py
--rw-r--r--  2.0 unx    32918 b- defN 23-Apr-28 06:49 clearml_agent/external/pyhocon/config_parser.py
--rw-r--r--  2.0 unx    22532 b- defN 23-Apr-28 06:49 clearml_agent/external/pyhocon/config_tree.py
--rw-r--r--  2.0 unx    13100 b- defN 23-Apr-28 06:49 clearml_agent/external/pyhocon/converter.py
--rw-r--r--  2.0 unx      352 b- defN 23-Apr-28 06:49 clearml_agent/external/pyhocon/exceptions.py
--rw-r--r--  2.0 unx      353 b- defN 23-Apr-28 06:49 clearml_agent/external/requirements_parser/__init__.py
--rw-r--r--  2.0 unx     1298 b- defN 23-Apr-28 06:49 clearml_agent/external/requirements_parser/fragment.py
--rw-r--r--  2.0 unx     2368 b- defN 23-Apr-28 06:49 clearml_agent/external/requirements_parser/parser.py
--rw-r--r--  2.0 unx     9362 b- defN 23-Apr-28 06:49 clearml_agent/external/requirements_parser/requirement.py
--rw-r--r--  2.0 unx      405 b- defN 23-Apr-28 06:49 clearml_agent/external/requirements_parser/vcs.py
--rw-r--r--  2.0 unx        1 b- defN 23-Apr-28 06:49 clearml_agent/glue/__init__.py
--rw-r--r--  2.0 unx      316 b- defN 23-Apr-28 06:49 clearml_agent/glue/definitions.py
--rw-r--r--  2.0 unx    46519 b- defN 23-Apr-28 06:49 clearml_agent/glue/k8s.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 06:49 clearml_agent/helper/__init__.py
--rw-r--r--  2.0 unx    18556 b- defN 23-Apr-28 06:49 clearml_agent/helper/base.py
--rw-r--r--  2.0 unx     2200 b- defN 23-Apr-28 06:49 clearml_agent/helper/check_update.py
--rw-r--r--  2.0 unx     3650 b- defN 23-Apr-28 06:49 clearml_agent/helper/console.py
--rw-r--r--  2.0 unx      828 b- defN 23-Apr-28 06:49 clearml_agent/helper/dicts.py
--rw-r--r--  2.0 unx     3403 b- defN 23-Apr-28 06:49 clearml_agent/helper/docker_args.py
--rw-r--r--  2.0 unx    15065 b- defN 23-Apr-28 06:49 clearml_agent/helper/process.py
--rw-r--r--  2.0 unx    30196 b- defN 23-Apr-28 06:49 clearml_agent/helper/repo.py
--rw-r--r--  2.0 unx    11656 b- defN 23-Apr-28 06:49 clearml_agent/helper/resource_monitor.py
--rw-r--r--  2.0 unx     5470 b- defN 23-Apr-28 06:49 clearml_agent/helper/runtime_verification.py
--rw-r--r--  2.0 unx     6697 b- defN 23-Apr-28 06:49 clearml_agent/helper/singleton.py
--rw-r--r--  2.0 unx     4759 b- defN 23-Apr-28 06:49 clearml_agent/helper/trace.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 06:49 clearml_agent/helper/gpu/__init__.py
--rw-r--r--  2.0 unx    14101 b- defN 23-Apr-28 06:49 clearml_agent/helper/gpu/gpustat.py
--rw-r--r--  2.0 unx   122691 b- defN 23-Apr-28 06:49 clearml_agent/helper/gpu/pynvml.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 06:49 clearml_agent/helper/os/__init__.py
--rw-r--r--  2.0 unx     2949 b- defN 23-Apr-28 06:49 clearml_agent/helper/os/daemonize.py
--rw-r--r--  2.0 unx     9311 b- defN 23-Apr-28 06:49 clearml_agent/helper/os/folder_cache.py
--rw-r--r--  2.0 unx     6180 b- defN 23-Apr-28 06:49 clearml_agent/helper/os/locks.py
--rw-r--r--  2.0 unx     6966 b- defN 23-Apr-28 06:49 clearml_agent/helper/os/portalocker.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/__init__.py
--rw-r--r--  2.0 unx    11518 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/base.py
--rw-r--r--  2.0 unx    32312 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/conda_api.py
--rw-r--r--  2.0 unx     8224 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/external_req.py
--rw-r--r--  2.0 unx     6181 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/poetry_api.py
--rw-r--r--  2.0 unx     1764 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/post_req.py
--rw-r--r--  2.0 unx     4257 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/priority_req.py
--rw-r--r--  2.0 unx    38835 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/pytorch.py
--rw-r--r--  2.0 unx    30694 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/requirements.py
--rw-r--r--  2.0 unx     3452 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/translator.py
--rw-r--r--  2.0 unx     3401 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/venv_update_api.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/pip_api/__init__.py
--rw-r--r--  2.0 unx     3360 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/pip_api/system.py
--rw-r--r--  2.0 unx     2951 b- defN 23-Apr-28 06:49 clearml_agent/helper/package/pip_api/venv.py
--rw-r--r--  2.0 unx     1244 b- defN 23-Apr-28 06:49 clearml_agent/interface/__init__.py
--rw-r--r--  2.0 unx    15036 b- defN 23-Apr-28 06:49 clearml_agent/interface/base.py
--rw-r--r--  2.0 unx     9937 b- defN 23-Apr-28 06:49 clearml_agent/interface/worker.py
--rw-r--r--  2.0 unx    11340 b- defN 23-Apr-28 06:50 clearml_agent-1.5.3rc2.dist-info/LICENSE
--rw-r--r--  2.0 unx    18199 b- defN 23-Apr-28 06:50 clearml_agent-1.5.3rc2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-28 06:50 clearml_agent-1.5.3rc2.dist-info/WHEEL
--rw-r--r--  2.0 unx       63 b- defN 23-Apr-28 06:50 clearml_agent-1.5.3rc2.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       14 b- defN 23-Apr-28 06:50 clearml_agent-1.5.3rc2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    12619 b- defN 23-Apr-28 06:50 clearml_agent-1.5.3rc2.dist-info/RECORD
-129 files, 2196722 bytes uncompressed, 380927 bytes compressed:  82.7%
+Zip file size: 402333 bytes, number of entries: 129
+-rw-r--r--  2.0 unx       50 b- defN 23-May-21 19:58 clearml_agent/__init__.py
+-rw-r--r--  2.0 unx     2891 b- defN 23-May-21 19:58 clearml_agent/__main__.py
+-rw-r--r--  2.0 unx     2410 b- defN 23-May-21 19:58 clearml_agent/complete.py
+-rw-r--r--  2.0 unx      736 b- defN 23-May-21 19:58 clearml_agent/config.py
+-rw-r--r--  2.0 unx    11127 b- defN 23-May-21 19:58 clearml_agent/definitions.py
+-rw-r--r--  2.0 unx     2826 b- defN 23-May-21 19:58 clearml_agent/errors.py
+-rw-r--r--  2.0 unx    15942 b- defN 23-May-21 19:58 clearml_agent/session.py
+-rw-r--r--  2.0 unx       25 b- defN 23-May-21 19:58 clearml_agent/version.py
+-rw-r--r--  2.0 unx      123 b- defN 23-May-21 19:58 clearml_agent/backend_api/__init__.py
+-rw-r--r--  2.0 unx     4786 b- defN 23-May-21 19:58 clearml_agent/backend_api/utils.py
+-rw-r--r--  2.0 unx      561 b- defN 23-May-21 19:58 clearml_agent/backend_api/config/__init__.py
+-rw-r--r--  2.0 unx    19804 b- defN 23-May-21 19:58 clearml_agent/backend_api/config/default/agent.conf
+-rw-r--r--  2.0 unx     1796 b- defN 23-May-21 19:58 clearml_agent/backend_api/config/default/api.conf
+-rw-r--r--  2.0 unx       92 b- defN 23-May-21 19:58 clearml_agent/backend_api/config/default/logging.conf
+-rw-r--r--  2.0 unx     6857 b- defN 23-May-21 19:58 clearml_agent/backend_api/config/default/sdk.conf
+-rw-r--r--  2.0 unx        0 b- defN 23-May-21 19:58 clearml_agent/backend_api/schema/__init__.py
+-rw-r--r--  2.0 unx     1295 b- defN 23-May-21 19:58 clearml_agent/backend_api/schema/action.py
+-rw-r--r--  2.0 unx     6824 b- defN 23-May-21 19:58 clearml_agent/backend_api/schema/service.py
+-rw-r--r--  2.0 unx      282 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/__init__.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_4/__init__.py
+-rw-r--r--  2.0 unx    17434 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_4/auth.py
+-rw-r--r--  2.0 unx     4029 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_4/debug.py
+-rw-r--r--  2.0 unx    89217 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_4/events.py
+-rw-r--r--  2.0 unx    90805 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_4/models.py
+-rw-r--r--  2.0 unx    66636 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_4/queues.py
+-rw-r--r--  2.0 unx   218713 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_4/tasks.py
+-rw-r--r--  2.0 unx    77983 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_4/workers.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_5/__init__.py
+-rw-r--r--  2.0 unx    17434 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_5/auth.py
+-rw-r--r--  2.0 unx     4029 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_5/debug.py
+-rw-r--r--  2.0 unx    90043 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_5/events.py
+-rw-r--r--  2.0 unx    90805 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_5/models.py
+-rw-r--r--  2.0 unx    66636 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_5/queues.py
+-rw-r--r--  2.0 unx   234295 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_5/tasks.py
+-rw-r--r--  2.0 unx    77996 b- defN 23-May-21 19:58 clearml_agent/backend_api/services/v2_5/workers.py
+-rw-r--r--  2.0 unx      338 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/__init__.py
+-rw-r--r--  2.0 unx      156 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/apimodel.py
+-rw-r--r--  2.0 unx     5233 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/callresult.py
+-rw-r--r--  2.0 unx     4598 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/datamodel.py
+-rw-r--r--  2.0 unx     1877 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/defs.py
+-rw-r--r--  2.0 unx      345 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/errors.py
+-rw-r--r--  2.0 unx     2817 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/request.py
+-rw-r--r--  2.0 unx     1932 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/response.py
+-rw-r--r--  2.0 unx    27875 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/session.py
+-rw-r--r--  2.0 unx     4200 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/token_manager.py
+-rw-r--r--  2.0 unx       55 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/client/__init__.py
+-rw-r--r--  2.0 unx    16055 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/client/client.py
+-rw-r--r--  2.0 unx      175 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/jsonmodels/__init__.py
+-rw-r--r--  2.0 unx     6397 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/jsonmodels/builders.py
+-rw-r--r--  2.0 unx      552 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/jsonmodels/collections.py
+-rw-r--r--  2.0 unx      145 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/jsonmodels/errors.py
+-rw-r--r--  2.0 unx    13503 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/jsonmodels/fields.py
+-rw-r--r--  2.0 unx     4738 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/jsonmodels/models.py
+-rw-r--r--  2.0 unx     2993 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/jsonmodels/parsers.py
+-rw-r--r--  2.0 unx     4006 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/jsonmodels/utilities.py
+-rw-r--r--  2.0 unx     6294 b- defN 23-May-21 19:58 clearml_agent/backend_api/session/jsonmodels/validators.py
+-rw-r--r--  2.0 unx      109 b- defN 23-May-21 19:58 clearml_agent/backend_config/__init__.py
+-rw-r--r--  2.0 unx    12445 b- defN 23-May-21 19:58 clearml_agent/backend_config/config.py
+-rw-r--r--  2.0 unx     1704 b- defN 23-May-21 19:58 clearml_agent/backend_config/converters.py
+-rw-r--r--  2.0 unx     1776 b- defN 23-May-21 19:58 clearml_agent/backend_config/defs.py
+-rw-r--r--  2.0 unx     3531 b- defN 23-May-21 19:58 clearml_agent/backend_config/entry.py
+-rw-r--r--  2.0 unx     2163 b- defN 23-May-21 19:58 clearml_agent/backend_config/environment.py
+-rw-r--r--  2.0 unx      186 b- defN 23-May-21 19:58 clearml_agent/backend_config/errors.py
+-rw-r--r--  2.0 unx      851 b- defN 23-May-21 19:58 clearml_agent/backend_config/log.py
+-rw-r--r--  2.0 unx     3815 b- defN 23-May-21 19:58 clearml_agent/backend_config/utils.py
+-rw-r--r--  2.0 unx       99 b- defN 23-May-21 19:58 clearml_agent/commands/__init__.py
+-rw-r--r--  2.0 unx    15160 b- defN 23-May-21 19:58 clearml_agent/commands/base.py
+-rw-r--r--  2.0 unx      536 b- defN 23-May-21 19:58 clearml_agent/commands/check_config.py
+-rw-r--r--  2.0 unx    17027 b- defN 23-May-21 19:58 clearml_agent/commands/config.py
+-rw-r--r--  2.0 unx     3204 b- defN 23-May-21 19:58 clearml_agent/commands/events.py
+-rw-r--r--  2.0 unx     6554 b- defN 23-May-21 19:58 clearml_agent/commands/resolver.py
+-rw-r--r--  2.0 unx   189757 b- defN 23-May-21 19:58 clearml_agent/commands/worker.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-21 19:58 clearml_agent/external/__init__.py
+-rw-r--r--  2.0 unx      256 b- defN 23-May-21 19:58 clearml_agent/external/pyhocon/__init__.py
+-rw-r--r--  2.0 unx    32918 b- defN 23-May-21 19:58 clearml_agent/external/pyhocon/config_parser.py
+-rw-r--r--  2.0 unx    22532 b- defN 23-May-21 19:58 clearml_agent/external/pyhocon/config_tree.py
+-rw-r--r--  2.0 unx    13100 b- defN 23-May-21 19:58 clearml_agent/external/pyhocon/converter.py
+-rw-r--r--  2.0 unx      352 b- defN 23-May-21 19:58 clearml_agent/external/pyhocon/exceptions.py
+-rw-r--r--  2.0 unx      353 b- defN 23-May-21 19:58 clearml_agent/external/requirements_parser/__init__.py
+-rw-r--r--  2.0 unx     1298 b- defN 23-May-21 19:58 clearml_agent/external/requirements_parser/fragment.py
+-rw-r--r--  2.0 unx     2368 b- defN 23-May-21 19:58 clearml_agent/external/requirements_parser/parser.py
+-rw-r--r--  2.0 unx     9362 b- defN 23-May-21 19:58 clearml_agent/external/requirements_parser/requirement.py
+-rw-r--r--  2.0 unx      405 b- defN 23-May-21 19:58 clearml_agent/external/requirements_parser/vcs.py
+-rw-r--r--  2.0 unx        1 b- defN 23-May-21 19:58 clearml_agent/glue/__init__.py
+-rw-r--r--  2.0 unx      316 b- defN 23-May-21 19:58 clearml_agent/glue/definitions.py
+-rw-r--r--  2.0 unx    47157 b- defN 23-May-21 19:58 clearml_agent/glue/k8s.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-21 19:58 clearml_agent/helper/__init__.py
+-rw-r--r--  2.0 unx    18556 b- defN 23-May-21 19:58 clearml_agent/helper/base.py
+-rw-r--r--  2.0 unx     2200 b- defN 23-May-21 19:58 clearml_agent/helper/check_update.py
+-rw-r--r--  2.0 unx     3650 b- defN 23-May-21 19:58 clearml_agent/helper/console.py
+-rw-r--r--  2.0 unx      828 b- defN 23-May-21 19:58 clearml_agent/helper/dicts.py
+-rw-r--r--  2.0 unx     3403 b- defN 23-May-21 19:58 clearml_agent/helper/docker_args.py
+-rw-r--r--  2.0 unx    15065 b- defN 23-May-21 19:58 clearml_agent/helper/process.py
+-rw-r--r--  2.0 unx    30196 b- defN 23-May-21 19:58 clearml_agent/helper/repo.py
+-rw-r--r--  2.0 unx    11656 b- defN 23-May-21 19:58 clearml_agent/helper/resource_monitor.py
+-rw-r--r--  2.0 unx     5470 b- defN 23-May-21 19:58 clearml_agent/helper/runtime_verification.py
+-rw-r--r--  2.0 unx     6697 b- defN 23-May-21 19:58 clearml_agent/helper/singleton.py
+-rw-r--r--  2.0 unx     4759 b- defN 23-May-21 19:58 clearml_agent/helper/trace.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-21 19:58 clearml_agent/helper/gpu/__init__.py
+-rw-r--r--  2.0 unx    14101 b- defN 23-May-21 19:58 clearml_agent/helper/gpu/gpustat.py
+-rw-r--r--  2.0 unx   122691 b- defN 23-May-21 19:58 clearml_agent/helper/gpu/pynvml.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-21 19:58 clearml_agent/helper/os/__init__.py
+-rw-r--r--  2.0 unx     2949 b- defN 23-May-21 19:58 clearml_agent/helper/os/daemonize.py
+-rw-r--r--  2.0 unx     9311 b- defN 23-May-21 19:58 clearml_agent/helper/os/folder_cache.py
+-rw-r--r--  2.0 unx     6180 b- defN 23-May-21 19:58 clearml_agent/helper/os/locks.py
+-rw-r--r--  2.0 unx     6966 b- defN 23-May-21 19:58 clearml_agent/helper/os/portalocker.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-21 19:58 clearml_agent/helper/package/__init__.py
+-rw-r--r--  2.0 unx    11518 b- defN 23-May-21 19:58 clearml_agent/helper/package/base.py
+-rw-r--r--  2.0 unx    32312 b- defN 23-May-21 19:58 clearml_agent/helper/package/conda_api.py
+-rw-r--r--  2.0 unx     8224 b- defN 23-May-21 19:58 clearml_agent/helper/package/external_req.py
+-rw-r--r--  2.0 unx     6181 b- defN 23-May-21 19:58 clearml_agent/helper/package/poetry_api.py
+-rw-r--r--  2.0 unx     1764 b- defN 23-May-21 19:58 clearml_agent/helper/package/post_req.py
+-rw-r--r--  2.0 unx     4257 b- defN 23-May-21 19:58 clearml_agent/helper/package/priority_req.py
+-rw-r--r--  2.0 unx    40778 b- defN 23-May-21 19:58 clearml_agent/helper/package/pytorch.py
+-rw-r--r--  2.0 unx    31340 b- defN 23-May-21 19:58 clearml_agent/helper/package/requirements.py
+-rw-r--r--  2.0 unx     3452 b- defN 23-May-21 19:58 clearml_agent/helper/package/translator.py
+-rw-r--r--  2.0 unx     3401 b- defN 23-May-21 19:58 clearml_agent/helper/package/venv_update_api.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-21 19:58 clearml_agent/helper/package/pip_api/__init__.py
+-rw-r--r--  2.0 unx     3360 b- defN 23-May-21 19:58 clearml_agent/helper/package/pip_api/system.py
+-rw-r--r--  2.0 unx     2951 b- defN 23-May-21 19:58 clearml_agent/helper/package/pip_api/venv.py
+-rw-r--r--  2.0 unx     1244 b- defN 23-May-21 19:58 clearml_agent/interface/__init__.py
+-rw-r--r--  2.0 unx    15036 b- defN 23-May-21 19:58 clearml_agent/interface/base.py
+-rw-r--r--  2.0 unx     9937 b- defN 23-May-21 19:58 clearml_agent/interface/worker.py
+-rw-r--r--  2.0 unx    11340 b- defN 23-May-21 19:59 clearml_agent-1.5.3rc3.dist-info/LICENSE
+-rw-r--r--  2.0 unx    18199 b- defN 23-May-21 19:59 clearml_agent-1.5.3rc3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-21 19:59 clearml_agent-1.5.3rc3.dist-info/WHEEL
+-rw-r--r--  2.0 unx       63 b- defN 23-May-21 19:59 clearml_agent-1.5.3rc3.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       14 b- defN 23-May-21 19:59 clearml_agent-1.5.3rc3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    12619 b- defN 23-May-21 19:59 clearml_agent-1.5.3rc3.dist-info/RECORD
+129 files, 2200861 bytes uncompressed, 381821 bytes compressed:  82.7%
```

## zipnote {}

```diff
@@ -363,26 +363,26 @@
 
 Filename: clearml_agent/interface/base.py
 Comment: 
 
 Filename: clearml_agent/interface/worker.py
 Comment: 
 
-Filename: clearml_agent-1.5.3rc2.dist-info/LICENSE
+Filename: clearml_agent-1.5.3rc3.dist-info/LICENSE
 Comment: 
 
-Filename: clearml_agent-1.5.3rc2.dist-info/METADATA
+Filename: clearml_agent-1.5.3rc3.dist-info/METADATA
 Comment: 
 
-Filename: clearml_agent-1.5.3rc2.dist-info/WHEEL
+Filename: clearml_agent-1.5.3rc3.dist-info/WHEEL
 Comment: 
 
-Filename: clearml_agent-1.5.3rc2.dist-info/entry_points.txt
+Filename: clearml_agent-1.5.3rc3.dist-info/entry_points.txt
 Comment: 
 
-Filename: clearml_agent-1.5.3rc2.dist-info/top_level.txt
+Filename: clearml_agent-1.5.3rc3.dist-info/top_level.txt
 Comment: 
 
-Filename: clearml_agent-1.5.3rc2.dist-info/RECORD
+Filename: clearml_agent-1.5.3rc3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## clearml_agent/definitions.py

```diff
@@ -176,14 +176,17 @@
 ENV_DEBUG_INFO = EnvironmentConfig("CLEARML_AGENT_DEBUG_INFO")
 ENV_CHILD_AGENTS_COUNT_CMD = EnvironmentConfig("CLEARML_AGENT_CHILD_AGENTS_COUNT_CMD")
 ENV_DOCKER_ARGS_FILTERS = EnvironmentConfig("CLEARML_AGENT_DOCKER_ARGS_FILTERS")
 ENV_DOCKER_ARGS_HIDE_ENV = EnvironmentConfig("CLEARML_AGENT_DOCKER_ARGS_HIDE_ENV")
 ENV_CONFIG_BC_IN_STANDALONE = EnvironmentConfig("CLEARML_AGENT_STANDALONE_CONFIG_BC", type=bool)
 """ Maintain backwards compatible configuration when launching in standalone mode """
 
+ENV_FORCE_DOCKER_AGENT_REPO = EnvironmentConfig("FORCE_CLEARML_AGENT_REPO", "CLEARML_AGENT_DOCKER_AGENT_REPO")
+
+
 ENV_SERVICES_DOCKER_RESTART = EnvironmentConfig("CLEARML_AGENT_SERVICES_DOCKER_RESTART")
 """
     Specify a restart value for a services agent task containers.
     Note that when a restart value is provided, task containers will not be run with the '--rm' flag and will
      not be cleaned up automatically when completed (this will need to be done externally using the
      'docker container prune' command to free up resources).
     Value format for this env var is "<restart-value>;<task-selector>", where:
```

## clearml_agent/version.py

```diff
@@ -1 +1 @@
-__version__ = '1.5.3rc2'
+__version__ = '1.5.3rc3'
```

## clearml_agent/backend_api/config/default/agent.conf

```diff
@@ -76,14 +76,24 @@
 
         # install with --upgrade
         force_upgrade: false,
 
         # additional artifact repositories to use when installing python packages
         # extra_index_url: ["https://allegroai.jfrog.io/clearml/api/pypi/public/simple"]
 
+        # control the pytorch wheel resolving algorithm, options are: "pip", "direct"
+        # "pip" (default): would automatically detect the cuda version, and supply pip with the correct
+        # extra-index-url, based on pytorch.org tables
+        # "direct": would resolve a direct link to the pytorch wheel by parsing the pytorch.org pip repository
+        # and matching the automatically detected cuda version with the required pytorch wheel.
+        # if the exact cuda version is not found for the required pytorch wheel, it will try
+        # a lower cuda version until a match is found
+        #
+        # pytorch_resolve: "pip"
+
         # additional conda channels to use when installing with conda package manager
         conda_channels: ["pytorch", "conda-forge", "defaults", ]
 
         # If set to true, Task's "installed packages" are ignored,
         # and the repository's "requirements.txt" is used instead
         # force_repo_requirements_txt: false
```

## clearml_agent/commands/config.py

```diff
@@ -40,15 +40,15 @@
     for f in LOCAL_CONFIG_FILES:
         conf_file = Path(f).absolute()
         if conf_file.exists():
             break
 
     if conf_file.exists() and conf_file.is_file() and conf_file.stat().st_size > 0:
         print('Configuration file already exists: {}'.format(str(conf_file)))
-        print('Leaving setup, feel free to edit the configuration file.')
+        print('Leaving setup. If you\'ve previously initialized the ClearML SDK on this machine, manually add an \'agent\' section to this file.')
         return
 
     print(description, end='')
     sentinel = ''
     parse_input = ''
     for line in iter(input, sentinel):
         parse_input += line+'\n'
```

## clearml_agent/commands/worker.py

```diff
@@ -69,14 +69,15 @@
     WORKING_STANDALONE_DIR,
     ENV_DEBUG_INFO,
     ENV_CHILD_AGENTS_COUNT_CMD,
     ENV_DOCKER_ARGS_FILTERS,
     ENV_FORCE_SYSTEM_SITE_PACKAGES,
     ENV_SERVICES_DOCKER_RESTART,
     ENV_CONFIG_BC_IN_STANDALONE,
+    ENV_FORCE_DOCKER_AGENT_REPO,
 )
 from clearml_agent.definitions import WORKING_REPOSITORY_DIR, PIP_EXTRA_INDICES
 from clearml_agent.errors import (
     APIError,
     CommandFailedError,
     Sigterm,
     SkippedCustomBuildScript,
@@ -3926,29 +3927,32 @@
         skip_pip_venv_install = ENV_AGENT_SKIP_PIP_VENV_INSTALL.get()
         if skip_pip_venv_install:
             base_cmd += ['-e', '{}={}'.format(ENV_AGENT_SKIP_PIP_VENV_INSTALL.vars[0], skip_pip_venv_install)]
 
         # if we are running a RC version, install the same version in the docker
         # because the default latest, will be a release version (not RC)
         specify_version = ''
+        # noinspection PyBroadException
         try:
             from clearml_agent.version import __version__
             _version_parts = __version__.split('.')
             if force_current_version or 'rc' in _version_parts[-1].lower() or 'rc' in _version_parts[-2].lower():
                 specify_version = '=={}'.format(__version__)
         except:
             pass
 
+        force_agent_repo = ENV_FORCE_DOCKER_AGENT_REPO.get()
+
         if os.environ.get('FORCE_LOCAL_CLEARML_AGENT_WHEEL'):
             local_wheel = os.path.expanduser(os.environ.get('FORCE_LOCAL_CLEARML_AGENT_WHEEL'))
             docker_wheel = '/tmp/{}'.format(basename(local_wheel))
             base_cmd += ['-v', local_wheel + ':' + docker_wheel]
             clearml_agent_wheel = '\"{}\"'.format(docker_wheel)
-        elif os.environ.get('FORCE_CLEARML_AGENT_REPO'):
-            clearml_agent_wheel = os.environ.get('FORCE_CLEARML_AGENT_REPO')
+        elif force_agent_repo:
+            clearml_agent_wheel = force_agent_repo
         else:
             # clearml-agent{specify_version}
             clearml_agent_wheel = 'clearml-agent{specify_version}'.format(specify_version=specify_version)
 
         mount_ssh = mount_ssh or '/root/.ssh'
         mount_ssh_ro = mount_ssh_ro or "{}_ro".format(mount_ssh.rstrip("/"))
         mount_apt_cache = mount_apt_cache or '/var/cache/apt/archives'
```

## clearml_agent/glue/k8s.py

```diff
@@ -5,15 +5,15 @@
 import hashlib
 import json
 import logging
 import os
 import re
 import subprocess
 import tempfile
-from collections import defaultdict
+from collections import defaultdict, namedtuple
 from copy import deepcopy
 from pathlib import Path
 from pprint import pformat
 from threading import Thread
 from time import sleep, time
 from typing import Text, List, Callable, Any, Collection, Optional, Union, Iterable, Dict, Tuple, Set
 
@@ -38,14 +38,15 @@
 
 
 class K8sIntegration(Worker):
     K8S_PENDING_QUEUE = "k8s_scheduler"
 
     K8S_DEFAULT_NAMESPACE = "clearml"
     AGENT_LABEL = "CLEARML=agent"
+    QUEUE_LABEL = "clearml-agent-queue"
 
     KUBECTL_APPLY_CMD = "kubectl apply --namespace={namespace} -f"
 
     KUBECTL_CLEANUP_DELETE_CMD = "kubectl delete pods " \
                                  "-l={agent_label} " \
                                  "--field-selector=status.phase!=Pending,status.phase!=Running " \
                                  "--namespace={namespace} " \
@@ -404,42 +405,58 @@
         if not self._agent_label:
             h = hashlib.md5()
             h.update(str(self.worker_id).encode('utf-8'))
             self._agent_label = '{}-{}'.format(self.AGENT_LABEL, h.hexdigest()[:8])
 
         return self._agent_label
 
-    def _get_used_pods(self):
-        # type: () -> Tuple[int, Set[str]]
-        # noinspection PyBroadException
+    RunningPod = namedtuple("RunningPod", "name queue namespace")
+
+    def _get_running_pods(self):
         try:
             kubectl_cmd = self.get_kubectl_command(
                 "get pods",
-                output="jsonpath=\"{range .items[*]}{.metadata.name}{' '}{.metadata.namespace}{'\\n'}{end}\""
+                output="jsonpath=\"{{range .items[*]}}{{.metadata.name}}{{' '}}{{.metadata.namespace}}{{' '}}"
+                       "{{.metadata.labels.{}}}{{'\\n'}}{{end}}\"".format(self.QUEUE_LABEL)
             )
             self.log.debug("Getting used pods: {}".format(kubectl_cmd))
             output = stringify_bash_output(get_bash_output(kubectl_cmd, raise_error=True))
 
             if not output:
                 # No such pod exist so we can use the pod_number we found
-                return 0, set([])
+                return []
 
             try:
-                items = output.splitlines()
-                current_pod_count = len(items)
-                namespaces = {item.rpartition(" ")[-1] for item in items}
-                self.log.debug(" - found {} pods in namespaces {}".format(current_pod_count, ", ".join(namespaces)))
-            except (KeyError, ValueError, TypeError, AttributeError) as ex:
-                print("Failed parsing used pods command response for cleanup: {}".format(ex))
-                return -1, set([])
+                return [
+                    self.RunningPod(
+                        name=parts[0],
+                        namespace=parts[1],
+                        queue=parts[2]
+                    )
+                    for parts in (line.split(" ") for line in output.splitlines())
+                ]
+            except Exception as ex:
+                raise Exception("Failed parsing used pods command response for cleanup: {}".format(ex))
+        except Exception as ex:
+            raise Exception('Failed obtaining used pods information: {}'.format(ex))
 
+    def _get_used_pods(self):
+        # type: () -> Tuple[int, Set[str]]
+        # noinspection PyBroadException
+        try:
+            items = self._get_running_pods()
+            if not items:
+                return 0, set([])
+            current_pod_count = len(items)
+            namespaces = {item.namespace for item in items}
+            self.log.debug(" - found {} pods in namespaces {}".format(current_pod_count, ", ".join(namespaces)))
             return current_pod_count, namespaces
         except Exception as ex:
-            print('Failed obtaining used pods information: {}'.format(ex))
-            return -2, set([])
+            self.log.debug("Failed getting used pods: {}", ex)
+            return -1, set([])
 
     def _is_same_tenant(self, task_session):
         if not task_session or task_session is self._session:
             return True
         # noinspection PyStatementEffect
         try:
             tenant = self._session.get_decoded_token(self._session.token, verify=False)["tenant"]
@@ -653,16 +670,16 @@
                 task_session=task_session,
                 **user_props
             )
 
     def _get_pod_labels(self, queue, queue_name):
         return [
             self._get_agent_label(),
-            "clearml-agent-queue={}".format(self._safe_k8s_label_value(queue)),
-            "clearml-agent-queue-name={}".format(self._safe_k8s_label_value(queue_name))
+            "{}={}".format(self.QUEUE_LABEL, self._safe_k8s_label_value(queue)),
+            "{}-name={}".format(self.QUEUE_LABEL, self._safe_k8s_label_value(queue_name))
         ]
 
     def _get_docker_args(self, docker_args, flags, target=None, convert=None):
         # type: (List[str], Collection[str], Optional[str], Callable[[str], Any]) -> Union[dict, List[str]]
         """
         Get docker args matching specific flags.
```

## clearml_agent/helper/package/pytorch.py

```diff
@@ -306,26 +306,28 @@
                 continue
             if len(parts) < 5 or arch_wheel not in parts[4].lower():
                 continue
 
             # yes this is for linux python 2.7 support, this is the only python 2.7 we support...
             if py_ver and py_ver[0] == '2' and len(parts) > 3 and not parts[3].endswith('u'):
                 continue
+
+            # check if this an actual match
+            if not req.compare_version(v) or \
+                    (last_v and SimpleVersion.compare_versions(last_v, '>', v, ignore_sub_versions=False)):
+                continue
+
             # update the closest matched version (from above)
             if not closest_v:
                 closest_v = v
             elif SimpleVersion.compare_versions(
                     version_a=closest_v, op='>=', version_b=v, num_parts=3) and \
                     SimpleVersion.compare_versions(
                         version_a=v, op='>=', version_b=req.specs[0][1], num_parts=3):
                 closest_v = v
-            # check if this an actual match
-            if not req.compare_version(v) or \
-                    (last_v and SimpleVersion.compare_versions(last_v, '>', v, ignore_sub_versions=False)):
-                continue
 
             url = '/'.join(torch_url.split('/')[:-1] + l.split('/'))
             last_v = v
             # if we found an exact match, use it
             # noinspection PyBroadException
             try:
                 if req.specs[0][0] == '==' and \
@@ -471,14 +473,31 @@
         base = self.MAP
         for key, exception in zip((self.os, self.cuda, self.python), self.exceptions):
             base = check(base, key, exception)
 
         return self.match_version(req, base).replace(" ", "\n")
 
     def replace(self, req):
+        # we first try to resolve things ourselves because pytorch pip is not always picking the correct
+        # versions from their pip repository
+
+        resolve_algorithm = str(self.config.get("agent.package_manager.pytorch_resolve", "pip")).lower()
+        if resolve_algorithm == "direct":
+            # noinspection PyBroadException
+            try:
+                new_req = self._replace(req)
+                if new_req:
+                    self._original_req.append((req, new_req))
+                return new_req
+            except Exception:
+                pass
+        elif resolve_algorithm not in ("direct", "pip"):
+            print("Warning: `agent.package_manager.pytorch_resolve={}` "
+                  "unrecognized, default to `pip`".format(resolve_algorithm))
+
         # check if package is already installed with system packages
         self.validate_python_version()
 
         # try to check if we can just use the new index URL, if we do not we will revert to old method
         try:
             extra_index_url = self.get_torch_index_url(self.cuda_version)
             if extra_index_url:
@@ -562,14 +581,27 @@
         return result
 
     def replace_back(self, list_of_requirements):  # type: (Dict) -> Dict
         """
         :param list_of_requirements: {'pip': ['a==1.0', ]}
         :return: {'pip': ['a==1.0', ]}
         """
+        def build_specific_version_req(a_line, a_name, a_new_req):
+            try:
+                r = Requirement.parse(a_line)
+                wheel_parts = r.uri.split("/")[-1].split('-')
+                version = str(wheel_parts[1].split('%')[0].split('+')[0])
+                new_r = Requirement.parse("{} == {} # {}".format(a_name, version, str(a_new_req)))
+                if new_r.line:
+                    # great it worked!
+                    return new_r.line
+            except:  # noqa
+                pass
+            return None
+
         if not self._original_req:
             return list_of_requirements
         try:
             for k, lines in list_of_requirements.items():
                 # k is either pip/conda
                 if k not in ('pip', 'conda'):
                     continue
@@ -585,17 +617,26 @@
                             if '@' in line:
                                 # skip if we have nothing to add
                                 if str(req).strip() != str(new_req).strip():
                                     # if this is local file and use the version detection
                                     if req.local_file:
                                         lines[i] = '{}'.format(str(new_req))
                                     else:
-                                        lines[i] = '{} # {}'.format(str(req), str(new_req))
+                                        # try to rebuild requirements with specific version:
+                                        new_line = build_specific_version_req(line, req.req.name, new_req)
+                                        if new_line:
+                                            lines[i] = new_line
+                                        else:
+                                            lines[i] = '{} # {}'.format(str(req), str(new_req))
                             else:
-                                lines[i] = '{} # {}'.format(line, str(new_req))
+                                new_line = build_specific_version_req(line, req.req.name, new_req)
+                                if new_line:
+                                    lines[i] = new_line
+                                else:
+                                    lines[i] = '{} # {}'.format(line, str(new_req))
                             break
         except:
             pass
 
         return list_of_requirements
 
     def post_scan_add_req(self):  # type: () -> Optional[MarkerRequirement]
```

## clearml_agent/helper/package/requirements.py

```diff
@@ -236,14 +236,31 @@
         :param int num_parts: number of parts to compare, split by . (dot)
         :return bool: version_a op version_b
         """
 
         if not version_b:
             return True
 
+        # remove trailing "*" in both
+        if "*" in version_a:
+            ignore_sub_versions = True
+            while version_a.endswith(".*"):
+                version_a = version_a[:-2]
+            if version_a == "*":
+                version_a = ""
+            num_parts = min(len(version_a.split('.')), len(version_b.split('.')), )
+
+        if "*" in version_b:
+            ignore_sub_versions = True
+            while version_b.endswith(".*"):
+                version_b = version_b[:-2]
+            if version_b == "*":
+                version_b = ""
+            num_parts = min(len(version_a.split('.')), len(version_b.split('.')), )
+
         if not num_parts:
             num_parts = max(len(version_a.split('.')), len(version_b.split('.')), )
 
         if op == '~=':
             num_parts = len(version_b.split('.')) - 1
             num_parts = max(num_parts, 2)
             op = '=='
```

## Comparing `clearml_agent-1.5.3rc2.dist-info/LICENSE` & `clearml_agent-1.5.3rc3.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `clearml_agent-1.5.3rc2.dist-info/METADATA` & `clearml_agent-1.5.3rc3.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: clearml-agent
-Version: 1.5.3rc2
+Version: 1.5.3rc3
 Summary: ClearML Agent - Auto-Magical DevOps for Deep Learning
 Home-page: https://github.com/allegroai/clearml-agent
 Author: Allegroai
 Author-email: clearml@allegro.ai
 License: Apache License 2.0
 Keywords: clearml trains devops machine deep learning agent automation hpc cluster
 Platform: UNKNOWN
```

## Comparing `clearml_agent-1.5.3rc2.dist-info/RECORD` & `clearml_agent-1.5.3rc3.dist-info/RECORD`

 * *Files 5% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 clearml_agent/__init__.py,sha256=x8fsfFnx1WMwOw5RJmsZxSfeUCWc6ZLXGX_78McBsNs,50
 clearml_agent/__main__.py,sha256=UlsXGOOFOyMfJCTpFWpYFmM21rNtdKYQ7lhgAeBYphs,2891
 clearml_agent/complete.py,sha256=g8oDVqTg6Nq-p56bTJyhBwCPgsoerh73VRox8YY4FUM,2410
 clearml_agent/config.py,sha256=-pLaHyLsQJxpEIY3TysH5baN6fc5hkpfhAiBT1P--ps,736
-clearml_agent/definitions.py,sha256=9WyvcxlOXwIaxsdaNhzZKOLfoah8Z_yk0tjHHxaE8S8,11014
+clearml_agent/definitions.py,sha256=YEexQUQD4HPgqER__urw7L6cm9D0AnVH5L_ukUQ9Cl8,11127
 clearml_agent/errors.py,sha256=JI7zT0mLJeL-rwgrFJAUAc__XdGm9HGpnxhEYeSu-44,2826
 clearml_agent/session.py,sha256=k_MFy26zhmeqG2G5BkVwO2HDdjGddYKozfv2C-kofO4,15942
-clearml_agent/version.py,sha256=ikqYD4qJxPcUehyzLR9I426rtc6WlNlH5Habz_uggz0,25
+clearml_agent/version.py,sha256=9u4XCFNlR3MfYXFca_Kdmc3SLkwT4uWiAyVE6qSsnqk,25
 clearml_agent/backend_api/__init__.py,sha256=lN-HRyAnJd6044dJ_RKgsA28BarmAG4Pbdxu9IIwWsE,123
 clearml_agent/backend_api/utils.py,sha256=tFHquUe5nJQX9p9dB25nx5HKNfbwOBWj29fG387W1-s,4786
 clearml_agent/backend_api/config/__init__.py,sha256=7prYyl5e9R4evwdOfMevoD-hjpj2P8UTbsy-OwidpDw,561
-clearml_agent/backend_api/config/default/agent.conf,sha256=jQ8p6dMtmv1yA0-MpulrUpx0UcUyNbuhRtxfssa-auQ,19161
+clearml_agent/backend_api/config/default/agent.conf,sha256=0UT7CwVMBQ_96Phdhs7RFoVrdqHruE9EQt7Xux163G0,19804
 clearml_agent/backend_api/config/default/api.conf,sha256=aEe45ERpEBh-a5XivxORZQDtoKR8VKOO0_mKxaWM3Uk,1796
 clearml_agent/backend_api/config/default/logging.conf,sha256=ZvFOI9Ww6ro4IgbNcCY-Zx3D25xaSpLKdDgG7PcxMfg,92
 clearml_agent/backend_api/config/default/sdk.conf,sha256=XFiJTCtBCuWQ2r2SgtPRMJsPFb81h175SySt7_aBBU0,6857
 clearml_agent/backend_api/schema/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 clearml_agent/backend_api/schema/action.py,sha256=EuE2jJ6-FNZBzb9PtGDfgZmEc7YMU_ONuqC3aklXjYQ,1295
 clearml_agent/backend_api/schema/service.py,sha256=a9o4_bWGk5MQan_-bynCmQqC7t5AmIH_GhzzKHjMfEE,6824
 clearml_agent/backend_api/services/__init__.py,sha256=upHJgJ3Y09BeF6rHQAItNICvfybaZSr8mEvh9ie60kA,282
@@ -62,32 +62,32 @@
 clearml_agent/backend_config/environment.py,sha256=Xpn-Ne2Qvc6X_K1ZtdkoIkD-5KWWu5YNiJF6zMeqjvc,2163
 clearml_agent/backend_config/errors.py,sha256=g--fZCjyH0RDuR58ue4Q0ngiLoqM2J1RsuRtdHxiWss,186
 clearml_agent/backend_config/log.py,sha256=J6ga032ViKAbhlj1nqW2t9Q-yBEcC50pqfSQwS-wihw,851
 clearml_agent/backend_config/utils.py,sha256=xW8hk23T7pJAOGUE3Ybtxvs2QJeXLHVnlU4ljKl0dvs,3815
 clearml_agent/commands/__init__.py,sha256=YV58pttbL_17b-nKhaQ_PvljaUcOiQeVoB-t-dBj_mY,99
 clearml_agent/commands/base.py,sha256=KESXmyIa3gGIMsQoSeBkvC63OLHB-SqrlntXAmrBvs4,15160
 clearml_agent/commands/check_config.py,sha256=EDrc16zKuNvRX-YWEI4y8qutBWk7BmWluyF5lAoF9tk,536
-clearml_agent/commands/config.py,sha256=sG2KDg7y_Sd-B9FYZqXt0TzpMgJLN8hhRS28QsOzWCI,16954
+clearml_agent/commands/config.py,sha256=mo8SR3w-Pd05Ap-iF8YeyqwHhLqRVbvV4ay8jjz3dkg,17027
 clearml_agent/commands/events.py,sha256=8Wz6AkFXvZxf_FKTwaElqaU4pyZ6yWlSAytsCdw1ZdQ,3204
 clearml_agent/commands/resolver.py,sha256=n-ueBfLygvg1xwk-XgaYJ3Rv1hu6RmWa8KP2EBWu84A,6554
-clearml_agent/commands/worker.py,sha256=FL0l08f23xEy_e4S1CoXR_2ncRBXZG0j4gTvwVmwJ8c,189674
+clearml_agent/commands/worker.py,sha256=uVR9OlXbrYdR1ilzI2Lo13HTB62aWljFAktshEJZ_ho,189757
 clearml_agent/external/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 clearml_agent/external/pyhocon/__init__.py,sha256=9Y64dUMI_8P52FEC4HP0IcB90JkrtJEAjqXRn8dLX0Q,256
 clearml_agent/external/pyhocon/config_parser.py,sha256=kKaRs0uKTw_MYi0zzExNksFY9gC_NJw-hB-LlqbSFok,32918
 clearml_agent/external/pyhocon/config_tree.py,sha256=Fbw1_2DoplrJXJTUVNlscmr6x42smNNMAYxilFVT7Dg,22532
 clearml_agent/external/pyhocon/converter.py,sha256=b0Yj2t5GeUJRaH26KBoToOa5KYzuyroz9zJO-Jvea54,13100
 clearml_agent/external/pyhocon/exceptions.py,sha256=k_6C6fB063ifnjiMDiRtL53tF4TO6lcbkwLA2wsYOZc,352
 clearml_agent/external/requirements_parser/__init__.py,sha256=lAOYEvxEeIkllA8iyViWAaiR3GDB7MagIrK_nWGr_L8,353
 clearml_agent/external/requirements_parser/fragment.py,sha256=6wOYDZVGIvx_EGX9CtnsJlgC35Yd4BvxFf6JfyoYhZ0,1298
 clearml_agent/external/requirements_parser/parser.py,sha256=YmuLV_XIHwiQo2XfpeEiA3PHh-YS_drYPc2SKlM6O14,2368
 clearml_agent/external/requirements_parser/requirement.py,sha256=RxAvVLlMTec7uC3IQpBe40D5FqEiB_DyH0-HCoNwNP0,9362
 clearml_agent/external/requirements_parser/vcs.py,sha256=mC72sDWbzzXUuZHZCw25eQ3dJitXII5E4AY3kg8yHEw,405
 clearml_agent/glue/__init__.py,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
 clearml_agent/glue/definitions.py,sha256=IIjiKRy7PjAuwi8w2xB_OSSB5YnpREsW5g8xAruL4UU,316
-clearml_agent/glue/k8s.py,sha256=fAr3djMd6biYvSq7TSxRVolisoWIhNbLQZ8WrbSHf-0,46519
+clearml_agent/glue/k8s.py,sha256=XarWika7pbgeGZag0ypUr5fg907ei-Wf1MQKfVbW-mw,47157
 clearml_agent/helper/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 clearml_agent/helper/base.py,sha256=BAHNgCG5HvTTKiI6jKcuO39yTnkeQQmoUFDMxHh0TqY,18556
 clearml_agent/helper/check_update.py,sha256=jPqXe-3pZ0uRjkhcNuLPxSyXhGuMxJ-IMkbubNMY4WQ,2200
 clearml_agent/helper/console.py,sha256=iaoo3U51xXRwahfWdMMjXw4OkY5BlKGXZdu5SzFIZVA,3650
 clearml_agent/helper/dicts.py,sha256=9NJVHPegGw3Cgn8Lyem2UM6prnzwf8IkR7uKYGPzPlA,828
 clearml_agent/helper/docker_args.py,sha256=e7VDowX2AdYV4_oPe8_ELkJqRiEx0W0CYWR0q7rdUJA,3403
 clearml_agent/helper/process.py,sha256=ik23IsAnzWzADNltfi_DDP5oOyOZc9PXjFXFmLOF4qg,15065
@@ -107,23 +107,23 @@
 clearml_agent/helper/package/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 clearml_agent/helper/package/base.py,sha256=JtNopkeg2hrNSqTSy8igkdvV1GZTwclxBQzCVZ98brE,11518
 clearml_agent/helper/package/conda_api.py,sha256=zkLEqXwr18TFxrVM6acIKtVF8mUbCg6RERvyhZtXiY4,32312
 clearml_agent/helper/package/external_req.py,sha256=ddFkbcbsbehUdjM3sC4ZnrZAiXSZtZf87vgpVJc5ol4,8224
 clearml_agent/helper/package/poetry_api.py,sha256=qr7dBDvgOBZUBECnwFTJlD3NltwgfNmGwW9mcnQtfjs,6181
 clearml_agent/helper/package/post_req.py,sha256=IZSGNDK8TUTLSAuCAHaN8y5AnFGhhYehm1Du6yJVysM,1764
 clearml_agent/helper/package/priority_req.py,sha256=Vw7Pa8gcwybM_mWVa7xgjeB2VNC7NKUUmGLJMEdBc5M,4257
-clearml_agent/helper/package/pytorch.py,sha256=hZWFxyhWP6gHEQwXdoPautpZ9LPdX0XwdgbtEtZkS6Y,38835
-clearml_agent/helper/package/requirements.py,sha256=iuucfMr_rFzPH7GiCP6ImAGkuCFomiir6Q-2-osO6Bg,30694
+clearml_agent/helper/package/pytorch.py,sha256=QhLHUSH1hic1X5q2DpXeSQLMnO5ybRi4xPNtkqQIeXw,40778
+clearml_agent/helper/package/requirements.py,sha256=cyRu7OgfS6_oWhMjbUHzlw78uwOM6oRs6OqpOi3rqVM,31340
 clearml_agent/helper/package/translator.py,sha256=jwdc0wwD7UI1Z80NLwGLEf1cFrzZKI28KPkqA-ZEURI,3452
 clearml_agent/helper/package/venv_update_api.py,sha256=dX_EeraHgU2cd36S2pKEzp_bNKGKeyTz83yOgYyw_vo,3401
 clearml_agent/helper/package/pip_api/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 clearml_agent/helper/package/pip_api/system.py,sha256=_4XFdVR8NCiuxhvHqTukeuPqbfpkO_Fxj2Mgb3ExMV0,3360
 clearml_agent/helper/package/pip_api/venv.py,sha256=t-xhl1djtlS_XhATwEeahI6eId_N6mMnN1ai2J0k6OI,2951
 clearml_agent/interface/__init__.py,sha256=8Bxzt8z7hcpx8EBDu7MrSt0aegdcCX1-EI6-yOY6sGs,1244
 clearml_agent/interface/base.py,sha256=gjECQZsolfZY6AADkomj_OzNy0Gy3ap5mnex2O7Wi0A,15036
 clearml_agent/interface/worker.py,sha256=AEKdxr2zWSQvZVl0fYtu-rM_vdO2XvnLy_qpgIbNDQ8,9937
-clearml_agent-1.5.3rc2.dist-info/LICENSE,sha256=y_zZWeeAnf6mRnYn7HBoaFA8qF9Xsx3j01jNTcppKlY,11340
-clearml_agent-1.5.3rc2.dist-info/METADATA,sha256=dHnMC4gXZpobSc7HgJoEjKOJVyVzI9x-KpG0GryoWr8,18199
-clearml_agent-1.5.3rc2.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-clearml_agent-1.5.3rc2.dist-info/entry_points.txt,sha256=05FyI7Hjs821dPHdDAe0OOu7ZRYDpJ4i7RpgNdX6NXA,63
-clearml_agent-1.5.3rc2.dist-info/top_level.txt,sha256=_TrkgE1QyUVMVlaIweOwBzQtGx6A2PJ60rBpYMYSlYo,14
-clearml_agent-1.5.3rc2.dist-info/RECORD,,
+clearml_agent-1.5.3rc3.dist-info/LICENSE,sha256=y_zZWeeAnf6mRnYn7HBoaFA8qF9Xsx3j01jNTcppKlY,11340
+clearml_agent-1.5.3rc3.dist-info/METADATA,sha256=9jXcCclpRqtoITsjX6wfRQZ4YXleFfHr7sc_1moItSw,18199
+clearml_agent-1.5.3rc3.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+clearml_agent-1.5.3rc3.dist-info/entry_points.txt,sha256=05FyI7Hjs821dPHdDAe0OOu7ZRYDpJ4i7RpgNdX6NXA,63
+clearml_agent-1.5.3rc3.dist-info/top_level.txt,sha256=_TrkgE1QyUVMVlaIweOwBzQtGx6A2PJ60rBpYMYSlYo,14
+clearml_agent-1.5.3rc3.dist-info/RECORD,,
```

